function storageAvailable(t){try{var e=window[t],o="__storage_test__";return e.setItem(o,o),e.removeItem(o),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}}function checkStorage(){if(!storageAvailable("localStorage"))return alert("Недоступно локальное хранилище. После перезагрузки страницы все данные будут потеряны."),!1;for(var t=(e=JSON.parse(localStorage.getItem("todoList"))).length-1;t>=0;t--)!0===e[t].done&&e.splice(t,1);return localStorage.setItem("todoList",JSON.stringify(e)),!0;var e}function getStorage(){return JSON.parse(localStorage.getItem("todoList"))}var vm=new Vue({el:"#app",data:{todoList:[],message:"",storageIsAvailable:!1},methods:{addItem:function(t){if(this.todoList.push({text:t,done:!1}),this.storageIsAvailable){var e=getStorage();e.push({text:t,done:!1}),localStorage.setItem("todoList",JSON.stringify(e))}document.getElementById("todoInput").focus()},changeStatus:function(t){if(console.log(t),this.storageIsAvailable){var e=getStorage();console.log(e[t].done),e[t].done=!this.todoList[t].done,console.log(e[t].done),localStorage.setItem("todoList",JSON.stringify(e))}}},mounted:function(){this.storageIsAvailable=checkStorage(),this.storageIsAvailable&&(this.todoList=getStorage()),document.getElementById("todoInput").focus()}});