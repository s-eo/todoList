function storageIsAvailable(t){try{var e=window[t],o="__storage_test__";return e.setItem(o,o),e.removeItem(o),!0}catch(t){return!1}}function cleanStorage(t){if(t){for(var e=JSON.parse(localStorage.getItem("todoList"))||[],o=e.length-1;o>=0;o--)!0===e[o].done&&e.splice(o,1);return localStorage.setItem("todoList",JSON.stringify(e)),!0}return alert("Недоступно локальное хранилище. После перезагрузки страницы все данные будут потеряны."),!1}function getStorage(){return JSON.parse(localStorage.getItem("todoList"))}document.addEventListener("DOMContentLoaded",function(){new Vue({el:"#app",data:{todoList:[],message:"",storageIsAvailable:!1},methods:{addItem:function(t){if(t&&(this.todoList.push({text:t,done:!1}),this.storageIsAvailable)){var e=getStorage();e.push({text:t,done:!1}),localStorage.setItem("todoList",JSON.stringify(e))}},changeStatus:function(t){if(console.log(t),this.storageIsAvailable){var e=getStorage();e[t].done=!e[t].done,localStorage.setItem("todoList",JSON.stringify(e))}}},mounted:function(){this.storageIsAvailable=storageIsAvailable("localStorage"),console.log("Storage is available? - "+this.storageIsAvailable),cleanStorage(this.storageIsAvailable),this.todoList=getStorage(),console.log("mounted")},updated:function(){console.log("updated")},beforeCreate:function(){console.log("beforeCreate")}})});